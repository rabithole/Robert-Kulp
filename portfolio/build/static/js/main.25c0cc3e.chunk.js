(this.webpackJsonpguidr=this.webpackJsonpguidr||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(81),l=a.n(o),c=(a(92),a(45)),i=(a(93),a(51)),s=a.n(i);function u(){return localStorage.getItem("token")}var p=function(){return s.a.create({baseURL:"https://guidr-2.herokuapp.com/api/",headers:{authorization:u()}})},m=Object(n.createContext)(),d=a(31),E=(a(79),a(20)),g=Object(E.c)({mapPropsToValues:function(e){return{username:"",password:""}},validationSchema:d.a().shape({username:d.b().min(2,"Too Short!").max(70,"Too Long!").required("UserName is Required!"),password:d.b().min(6,"Too Short!").max(70,"Too Long!").required("Password is Required")}),handleSubmit:function(e,t){var a=t.props,n=t.setSubmitting,r=t.resetForm;p().post("auth/login",e).then((function(e){console.log("Data",e),localStorage.setItem("token",e.data.token),a.history.push("/Trips")})).catch((function(e){return console.log(e.response)})),setTimeout((function(){console.log("Entered Value",e),n(!1)}),1e3),r()}})((function(e){var t=e.values,a=e.errors,n=e.touched;return r.a.createElement(E.b,{className:"formBody"},r.a.createElement("h1",null," Login "),r.a.createElement(E.a,{className:"input",type:"text",name:"username",placeholder:"UserName"}),n.username&&a.username&&r.a.createElement("p",{className:"errors"},a.username),r.a.createElement(E.a,{className:"input",type:"password",name:"password",placeholder:"Password"}),n.password&&a.password&&r.a.createElement("p",{className:"errors"},a.password),r.a.createElement("button",{className:"button",type:"submit",disabled:t.isSubmitting},t.isSubmitting?"Submitting":"Login"))}));var h=Object(E.c)({mapPropsToValues:function(e){return{username:"",password:""}},validationSchema:d.a().shape({username:d.b().min(2,"Too Short!").max(70,"Too Long!").required("UserName is Required!"),password:d.b().min(6,"Too Short!").max(70,"Too Long!").required("Password is Required")}),handleSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;s.a.post("https://guidr-2.herokuapp.com/api/auth/register",e).then((function(e){console.log("Data",e)})).catch((function(e){return console.log(e.response)})),setTimeout((function(){console.log("Entered Value",e),a(!1)}),1e3),n()}})((function(e){var t=e.values,a=e.errors,n=e.touched;return r.a.createElement(E.b,{className:"formBody"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement(E.a,{className:"input",type:"text",name:"username",placeholder:"UserName"}),n.username&&a.username&&r.a.createElement("p",{className:"errors"},a.username),r.a.createElement(E.a,{className:"input",type:"password",name:"password",placeholder:"Password"}),n.password&&a.password&&r.a.createElement("p",{className:"errors"},a.password),r.a.createElement("button",{className:"button",type:"submit",disabled:t.isSubmitting},t.isSubmitting?"SigningUp":"Sign Up"))})),b=a(30),v=a(6);var f=function(e){console.log(e.id);var t=Object(b.f)();return r.a.createElement("div",{className:"trip"},r.a.createElement("h1",null,"Trip Details"),r.a.createElement("p",null,r.a.createElement("strong",null,"TITLE: "),e.title),r.a.createElement("p",null,r.a.createElement("strong",null,"DESCRIPTION: "),e.description),r.a.createElement("p",null,r.a.createElement("strong",null,"DISTANCE: "),e.distance),r.a.createElement("p",null,r.a.createElement("strong",null,"DATE: "),e.date),r.a.createElement("p",null,r.a.createElement("strong",null,"TYPE: "),e.type),r.a.createElement("button",{onClick:function(a){return function(e,a){e.preventDefault(),p().delete("/trips/".concat(a)).then((function(e){console.log("Deleted"),t.push("/Trips")})).catch((function(e){console.log(e)}))}(a,e.id)}},"Delete Trip"),r.a.createElement(v.b,{to:"/UpdateTrip/".concat(e.id)},r.a.createElement("button",null,"Update Trip")))};var T=function(){var e=Object(n.useContext)(m).trips;return r.a.createElement("div",null,e.map((function(e){return r.a.createElement(v.b,{to:"/SingleTrip/".concat(e.id)},r.a.createElement(f,{title:e.title,key:e.id,id:e.id,description:e.description,distance:e.distance,date:e.date,type:e.trip_type}))})))},y=a(86);var S=function(e){var t=e.component,a=Object(y.a)(e,["component"]);return(r.a.createElement(b.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(b.a,{to:"/signin"})}})))},x=a(43),N=a(59),C=a(65);var w=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],l=function(e){o(Object(N.a)({},a,Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"CreateTrip"},r.a.createElement("h1",null,"Create a new trip"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=C(localStorage.getItem("token"));a.user_id=t.userid,p().post("trips",a).then((function(e){console.log(a),o({newTrip:e.data}),console.log(e),document.getElementById("reset").reset()})).catch((function(e){return console.log(e.response,a)}))},id:"reset"},r.a.createElement("input",{type:"text",name:"title",placeholder:"New Trip Name",value:a.title,onChange:l}),r.a.createElement("input",{type:"text",name:"description",placeholder:"Trip Description",value:a.description,onChange:l}),r.a.createElement("input",{type:"text",name:"duration",placeholder:"Trip Duration",value:a.duration,onChange:l}),r.a.createElement("input",{type:"text",name:"distance",placeholder:"Distance Traveled",value:a.distance,onChange:l}),r.a.createElement("input",{type:"text",name:"trip_type",placeholder:"Type of Trip",value:a.trip_type,onChange:l}),r.a.createElement("p",null,"Private Guide"),r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"is_private",value:a.is_private=0,onChange:l}),r.a.createElement("p",null,"Professional Guide"),r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"is_professional",value:a.is_professional=0,onChange:l}),r.a.createElement("input",{type:"time",name:"date",value:a.date,onChange:l}),r.a.createElement("button",null,"Add Trip")))};var O=function(e){return console.log("logout"),localStorage.removeItem("token"),r.a.createElement(b.a,{to:"/login"})},k=a(65);var j=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],l=a[1];console.log(o),Object(n.useEffect)((function(){p().get("trips/".concat(e.match.params.id)).then((function(e){l(e.data[0])})).catch((function(e){console.log(e)}))}),[e.match.params.id]);var i=function(e){l(Object(N.a)({},o,Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"CreateTrip"},r.a.createElement("h1",null,"Update Trip"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=k(localStorage.getItem("token"));o.user_id=t.userid,p().put("trips/".concat(o.id),o).then((function(e){console.log(o),l({tripUpdate:e.data}),console.log(e),document.getElementById("reset").reset()})).catch((function(e){return console.log(e.response,o)}))},id:"reset"},r.a.createElement("input",{type:"text",name:"title",placeholder:"New Trip Name",value:o.title,onChange:i}),r.a.createElement("input",{type:"text",name:"description",placeholder:"Trip Description",value:o.description,onChange:i}),r.a.createElement("input",{type:"text",name:"duration",placeholder:"Trip Duration",value:o.duration,onChange:i}),r.a.createElement("input",{type:"text",name:"distance",placeholder:"Distance Traveled",value:o.distance,onChange:i}),r.a.createElement("input",{type:"text",name:"trip_type",placeholder:"Type of Trip",value:o.trip_type,onChange:i}),r.a.createElement("p",null,"Private Guide"),r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"is_private",value:o.is_private=0,onChange:i}),r.a.createElement("p",null,"Professional Guide"),r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"is_professional",value:o.is_professional=0,onChange:i}),r.a.createElement("input",{type:"time",name:"date",value:o.date,onChange:i}),r.a.createElement("button",null,"Add Trip")))};var D=function(e){return console.log(e),r.a.createElement("div",{className:"trip"},r.a.createElement("h1",null,"Trip Details"),r.a.createElement("p",null,r.a.createElement("strong",null,"TITLE: "),e.title),r.a.createElement("p",null,r.a.createElement("strong",null,"DESCRIPTION: "),e.description),r.a.createElement("p",null,r.a.createElement("strong",null,"DISTANCE: "),e.distance),r.a.createElement("p",null,r.a.createElement("strong",null,"DATE: "),e.date),r.a.createElement("p",null,r.a.createElement("strong",null,"TYPE: "),e.type),r.a.createElement(v.b,{to:"/UpdateTrip/".concat(e.id)},r.a.createElement("button",null,"Update Trip")))};var I=function(){var e=Object(n.useContext)(m).trips;return console.log(e),r.a.createElement("div",{className:"trip"},e.map((function(e){return r.a.createElement(D,{title:e.title,key:e.id,id:e.id,description:e.description,distance:e.distance,date:e.date,type:e.trip_type})})))},U=a(65);var _=Object(b.g)((function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],l=u();return Object(n.useEffect)((function(){l?function(){var e=U(localStorage.getItem("token"));a.user_id=e.userid}():console.log("Signed In"),p().get("trips").then((function(e){o(e.data)})).catch((function(e){console.log("Ooops",e)}))}),[a.user_id,!l]),r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,!l&&r.a.createElement(v.b,{to:"/SignUp"},"Sign Up"),!l&&r.a.createElement(v.b,{to:"/Login"},"Login"),l&&r.a.createElement(v.b,{to:"/CreateTrip"},"Create A Trips"),l&&r.a.createElement(v.b,{to:"/Trips"},"Trip List"),l&&r.a.createElement(v.b,{to:"/Logout"},"Logout")),r.a.createElement(b.b,{exact:!0,path:"/login",component:g}),r.a.createElement(b.b,{exact:!0,path:"/SignUp",component:h}),r.a.createElement(m.Provider,{value:{trips:a}},r.a.createElement(S,{exact:!0,path:"/Trips",component:T}),r.a.createElement(S,{exact:!0,path:"/Trip/:id",component:f}),r.a.createElement(S,{exact:!0,path:"/SingleTrip/:id",component:I})),r.a.createElement(S,{exact:!0,path:"/CreateTrip",component:w}),r.a.createElement(S,{exact:!0,path:"/Logout",component:O}),r.a.createElement(S,{exact:!0,path:"/UpdateTrip/:id",component:j}))}));l.a.render(r.a.createElement(v.a,null,r.a.createElement(_,null)),document.getElementById("root"))},79:function(e,t,a){},87:function(e,t,a){e.exports=a(118)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.25c0cc3e.chunk.js.map